{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\2025\\\\March\\\\BHT_Sravanth_t6565 (Music)\\\\music-player\\\\frontend\\\\src\\\\pages\\\\UserPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport api from \"../services/api\";\nimport MusicList from \"../components/MusicList\";\nimport MusicPlayer from \"../components/MusicPlayer\";\nimport \"../styles/UserPage.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserPage = () => {\n  _s();\n  const [tracks, setTracks] = useState([]);\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const audioRef = useRef(new Audio());\n  useEffect(() => {\n    const fetchTracks = async () => {\n      try {\n        const res = await api.get(\"/user/music\");\n        setTracks(res.data);\n      } catch (error) {\n        console.error(\"Error loading tracks:\", error);\n      }\n    };\n    fetchTracks();\n  }, []);\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n    const updateProgress = () => {\n      const current = audio.currentTime;\n      const duration = audio.duration || 1; // avoid divide by 0\n      const percent = current / duration * 100;\n      setProgress(percent);\n    };\n    audio.addEventListener(\"timeupdate\", updateProgress);\n    return () => {\n      audio.removeEventListener(\"timeupdate\", updateProgress);\n    };\n  }, [currentTrack]);\n  const handleTrackEnd = () => {\n    const currentIndex = tracks.findIndex(t => t.id === currentTrack.id);\n    const nextTrack = tracks[currentIndex + 1];\n    if (nextTrack) setCurrentTrack(nextTrack);else setCurrentTrack(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"library-title\",\n          children: \"Music Library\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MusicList, {\n          musicTracks: tracks,\n          onSelectTrack: track => {\n            setCurrentTrack(track);\n            setProgress(0);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"now-playing-title\",\n          children: [\"Now Playing:\", \" \", currentTrack ? `${currentTrack.title} by ${currentTrack.artist}` : \"Nothing selected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), currentTrack && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"track-artist\",\n            children: currentTrack.artist\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress\",\n              style: {\n                width: `${progress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MusicPlayer, {\n          currentTrack: currentTrack,\n          onTrackEnd: handleTrackEnd,\n          audioRef: audioRef,\n          isPlaying: isPlaying,\n          setIsPlaying: setIsPlaying\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(UserPage, \"nRa64QDk29VSyHkj1G4tYLF9O/0=\");\n_c = UserPage;\nexport default UserPage;\nvar _c;\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","MusicList","MusicPlayer","jsxDEV","_jsxDEV","UserPage","_s","tracks","setTracks","currentTrack","setCurrentTrack","isPlaying","setIsPlaying","progress","setProgress","audioRef","Audio","fetchTracks","res","get","data","error","console","audio","current","updateProgress","currentTime","duration","percent","addEventListener","removeEventListener","handleTrackEnd","currentIndex","findIndex","t","id","nextTrack","className","children","fileName","_jsxFileName","lineNumber","columnNumber","musicTracks","onSelectTrack","track","title","artist","style","width","onTrackEnd","_c","$RefreshReg$"],"sources":["C:/Users/Dell/Desktop/2025/March/BHT_Sravanth_t6565 (Music)/music-player/frontend/src/pages/UserPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport api from \"../services/api\";\r\nimport MusicList from \"../components/MusicList\";\r\nimport MusicPlayer from \"../components/MusicPlayer\";\r\nimport \"../styles/UserPage.css\";\r\n\r\nconst UserPage = () => {\r\n  const [tracks, setTracks] = useState([]);\r\n  const [currentTrack, setCurrentTrack] = useState(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  const audioRef = useRef(new Audio());\r\n\r\n  useEffect(() => {\r\n    const fetchTracks = async () => {\r\n      try {\r\n        const res = await api.get(\"/user/music\");\r\n        setTracks(res.data);\r\n      } catch (error) {\r\n        console.error(\"Error loading tracks:\", error);\r\n      }\r\n    };\r\n    fetchTracks();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    const updateProgress = () => {\r\n      const current = audio.currentTime;\r\n      const duration = audio.duration || 1; // avoid divide by 0\r\n      const percent = (current / duration) * 100;\r\n      setProgress(percent);\r\n    };\r\n\r\n    audio.addEventListener(\"timeupdate\", updateProgress);\r\n    return () => {\r\n      audio.removeEventListener(\"timeupdate\", updateProgress);\r\n    };\r\n  }, [currentTrack]);\r\n\r\n  const handleTrackEnd = () => {\r\n    const currentIndex = tracks.findIndex((t) => t.id === currentTrack.id);\r\n    const nextTrack = tracks[currentIndex + 1];\r\n    if (nextTrack) setCurrentTrack(nextTrack);\r\n    else setCurrentTrack(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"user-page\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"library-section\">\r\n          <h1 className=\"library-title\">Music Library</h1>\r\n          <MusicList\r\n            musicTracks={tracks}\r\n            onSelectTrack={(track) => {\r\n              setCurrentTrack(track);\r\n              setProgress(0);\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"player-section\">\r\n          <h2 className=\"now-playing-title\">\r\n            Now Playing:{\" \"}\r\n            {currentTrack\r\n              ? `${currentTrack.title} by ${currentTrack.artist}`\r\n              : \"Nothing selected\"}\r\n          </h2>\r\n\r\n          {currentTrack && (\r\n            <div className=\"track-info\">\r\n              <p className=\"track-artist\">{currentTrack.artist}</p>\r\n              <div className=\"progress-bar\">\r\n                <div\r\n                  className=\"progress\"\r\n                  style={{ width: `${progress}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <MusicPlayer\r\n            currentTrack={currentTrack}\r\n            onTrackEnd={handleTrackEnd}\r\n            audioRef={audioRef}\r\n            isPlaying={isPlaying}\r\n            setIsPlaying={setIsPlaying}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}